<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n L√Ω S·∫£n Ph·∫©m</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        nav {
            background: #333;
            padding: 10px;
            margin-bottom: 20px;
        }
        nav a {
            color: white;
            margin: 0 15px;
            text-decoration: none;
            font-weight: bold;
        }
        nav a:hover {
            text-decoration: underline;
        }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; }
        th { background: #f4f4f4; }
        form { margin-top: 20px; }
        input, button { padding: 6px; margin: 4px; }
        .btn-delete {
            color: white;
            background: red;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        .btn-edit {
            color: white;
            background: orange;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<!-- Navigation Menu -->
<nav>
    <a href="main.html">üè† Trang ch·ªß</a>
    <a href="sanpham.html">üì¶ S·∫£n ph·∫©m</a>
    <a href="khachhang.html">üë• Kh√°ch h√†ng</a>
    <a href="giaodich.html">üí≥ Giao d·ªãch</a>
</nav>

<h1>Qu·∫£n L√Ω S·∫£n Ph·∫©m</h1>

<!-- Form th√™m s·∫£n ph·∫©m -->
<h3>Th√™m s·∫£n ph·∫©m m·ªõi</h3>
<form id="addForm">
    <input type="text" id="maSp" placeholder="M√£ s·∫£n ph·∫©m" required>
    <input type="text" id="tenSp" placeholder="T√™n s·∫£n ph·∫©m" required>
    <input type="number" id="gia" placeholder="Gi√°" required min="0" step="0.01">
    <button type="submit">Th√™m</button>
</form>

<!-- B·∫£ng danh s√°ch -->
<h3>Danh s√°ch s·∫£n ph·∫©m</h3>
<table>
    <thead>
    <tr>
        <th>M√£ SP</th>
        <th>T√™n s·∫£n ph·∫©m</th>
        <th>Gi√°</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody id="sanpham-table"></tbody>
</table>

<script>
    const apiSP = '/api/sanpham';

    // Load danh s√°ch s·∫£n ph·∫©m
    async function loadSanPham() {
        const res = await fetch(apiSP);
        const data = await res.json();
        const tbody = document.getElementById('sanpham-table');
        tbody.innerHTML = '';
        data.forEach(sp => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${sp.maSp}</td>
                <td>${sp.tenSp}</td>
                <td>${sp.gia.toLocaleString()}‚Ç´</td>
                <td>
                    <button class="btn-edit" onclick="editSanPham('${sp.maSp}', '${sp.tenSp}', ${sp.gia})">S·ª≠a</button>
                    <button class="btn-delete" onclick="deleteSanPham('${sp.maSp}')">X√≥a</button>
                </td>
            `;
            tbody.appendChild(tr);
        });
    }

    // Th√™m s·∫£n ph·∫©m m·ªõi
    document.getElementById('addForm').addEventListener('submit', async e => {
        e.preventDefault();
        const maSp = document.getElementById('maSp').value;
        const tenSp = document.getElementById('tenSp').value;
        const gia = parseFloat(document.getElementById('gia').value);

        await fetch(apiSP, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({maSp, tenSp, gia})
        });

        document.getElementById('addForm').reset();
        loadSanPham();
    });

    // X√≥a s·∫£n ph·∫©m
    async function deleteSanPham(maSp) {
        if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y?')) {
            await fetch(`${apiSP}/${maSp}`, {method: 'DELETE'});
            loadSanPham();
        }
    }

    // S·ª≠a s·∫£n ph·∫©m
    async function editSanPham(maSpCu, tenSpCu, giaCu) {
        const maSp = prompt('Nh·∫≠p m√£ s·∫£n ph·∫©m m·ªõi:', maSpCu);
        const tenSp = prompt('Nh·∫≠p t√™n s·∫£n ph·∫©m m·ªõi:', tenSpCu);
        const gia = parseFloat(prompt('Nh·∫≠p gi√° m·ªõi:', giaCu));
        if (maSp && tenSp && !isNaN(gia)) {
            await fetch(`${apiSP}/${maSpCu}`, {
                method: 'PUT',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({maSp, tenSp, gia})
            });
            loadSanPham();
        }
    }

    // Kh·ªüi ch·∫°y
    loadSanPham();
</script>

</body>
</html>
