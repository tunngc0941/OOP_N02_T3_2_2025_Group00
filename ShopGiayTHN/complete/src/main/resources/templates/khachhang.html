<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>üë• Qu·∫£n l√Ω kh√°ch h√†ng - Shop Gi√†y THN</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f7f5f2;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      .navbar-custom {
        background-color: #2c3e50;
      }
      .navbar-custom .nav-link,
      .navbar-custom .navbar-brand {
        color: #ecf0f1;
        font-weight: 600;
      }
      .navbar-custom .nav-link:hover {
        color: #f39c12;
      }
      header {
        background: url('https://images.unsplash.com/photo-1576491110919-df70d852860f?q=80&w=1172&auto=format&fit=crop&ixlib=rb-4.1.0')
          center/cover no-repeat;
        height: 280px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
      }
      header h1 {
        font-size: 3.5rem;
        background: rgba(44, 62, 80, 0.7);
        padding: 20px 40px;
        border-radius: 12px;
      }
      .card-menu {
        background: #ffffff;
        border-radius: 15px;
        border: 1px solid #ddd;
      }
      .btn-order {
        background: #2980b9;
        color: white;
        border: none;
        transition: background-color 0.3s ease;
      }
      .btn-order:hover {
        background: #1f618d;
      }
      .section-title {
        margin-top: 40px;
        margin-bottom: 25px;
        font-weight: 700;
        color: #34495e;
      }
      footer {
        margin-top: 60px;
        background: #2c3e50;
        color: #bdc3c7;
        padding: 15px 0;
        text-align: center;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-custom">
      <div class="container">
        <a class="navbar-brand" href="#">üè† Shop Gi√†y THN</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navMain"
        >
          <span class="navbar-toggler-icon"
            ><i class="bi bi-list" style="font-size: 1.5rem; color: #ecf0f1"></i
          ></span>
        </button>
        <div class="collapse navbar-collapse" id="navMain">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="/main">Trang ch·ªß</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/sanpham">S·∫£n ph·∫©m</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/khachhang">Kh√°ch h√†ng</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/giaodich">Giao d·ªãch</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Banner -->
    <header>
      <h1>Qu·∫£n l√Ω Kh√°ch h√†ng</h1>
    </header>

    <!-- Main content -->
    <main class="container my-5">
      <h2 class="section-title text-center">Danh s√°ch Kh√°ch h√†ng</h2>

      <!-- Table hi·ªÉn th·ªã kh√°ch h√†ng -->
      <div class="table-responsive mb-4">
        <table class="table table-striped table-bordered align-middle">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>T√™n kh√°ch h√†ng</th>
              <th>S·ªë ƒëi·ªán tho·∫°i</th>
              <th>H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody id="khachhang-list">
            <!-- D·ªØ li·ªáu kh√°ch h√†ng s·∫Ω load v√†o ƒë√¢y -->
          </tbody>
        </table>
      </div>

      <!-- Form th√™m / s·ª≠a kh√°ch h√†ng -->
      <div class="card card-menu p-4 shadow-sm">
        <h4 class="mb-3">Th√™m / C·∫≠p nh·∫≠t Kh√°ch h√†ng</h4>
        <form id="form-khachhang">
          <div class="mb-3">
            <label for="ten" class="form-label">T√™n kh√°ch h√†ng</label>
            <input
              type="text"
              class="form-control"
              id="ten"
              placeholder="Nh·∫≠p t√™n kh√°ch h√†ng"
              required
            />
          </div>
          <div class="mb-3">
            <label for="sdt" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
            <input
              type="text"
              class="form-control"
              id="sdt"
              placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"
              required
            />
          </div>
          <input type="hidden" id="sdtCu" />
          <button type="submit" class="btn btn-primary btn-order">
            L∆∞u th√¥ng tin
          </button>
          <button type="button" class="btn btn-secondary ms-2" id="btn-reset">
            X√≥a form
          </button>
        </form>
      </div>
    </main>

    <footer>&copy; 2025 Shop Gi√†y THN - H·ªá th·ªëng qu·∫£n l√Ω b√°n h√†ng</footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const listEl = document.getElementById('khachhang-list');
      const form = document.getElementById('form-khachhang');
      const tenInput = document.getElementById('ten');
      const sdtInput = document.getElementById('sdt');
      const sdtCuInput = document.getElementById('sdtCu');
      const btnReset = document.getElementById('btn-reset');

      // L·∫•y d·ªØ li·ªáu t·ª´ localStorage ho·∫∑c d√πng d·ªØ li·ªáu m·∫´u
      let khachHangData = JSON.parse(localStorage.getItem('khachHangData')) || [
        { ten: 'Nguy·ªÖn VƒÉn A', sdt: '0912345678' },
        { ten: 'Tr·∫ßn Th·ªã B', sdt: '0987654321' },
        { ten: 'Ph·∫°m VƒÉn C', sdt: '0905123456' },
        { ten: 'L√™ Th·ªã D', sdt: '0933344455' },
      ];

      // H√†m l∆∞u d·ªØ li·ªáu v√†o localStorage
      function saveData() {
        localStorage.setItem('khachHangData', JSON.stringify(khachHangData));
      }

      function loadKhachHang() {
        listEl.innerHTML = '';
        if (khachHangData.length === 0) {
          listEl.innerHTML = `<tr><td colspan="4" class="text-center">Ch∆∞a c√≥ kh√°ch h√†ng n√†o.</td></tr>`;
          return;
        }

        khachHangData.forEach((kh, idx) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
          <td>${idx + 1}</td>
          <td>${kh.ten}</td>
          <td>${kh.sdt}</td>
          <td>
            <button class="btn btn-sm btn-warning me-2" onclick="editKhachHang('${
              kh.sdt
            }')">
              <i class="bi bi-pencil-square"></i> S·ª≠a
            </button>
            <button class="btn btn-sm btn-danger" onclick="deleteKhachHang('${
              kh.sdt
            }')">
              <i class="bi bi-trash"></i> X√≥a
            </button>
          </td>
        `;
          listEl.appendChild(tr);
        });
      }

      function resetForm() {
        tenInput.value = '';
        sdtInput.value = '';
        sdtCuInput.value = '';
        form.querySelector('button[type="submit"]').textContent =
          'L∆∞u th√¥ng tin';
      }

      btnReset.addEventListener('click', resetForm);

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const ten = tenInput.value.trim();
        const sdt = sdtInput.value.trim();
        const sdtCu = sdtCuInput.value;

        if (sdtCu) {
          // C·∫≠p nh·∫≠t
          const idx = khachHangData.findIndex((kh) => kh.sdt === sdtCu);
          if (idx !== -1) khachHangData[idx] = { ten, sdt };
        } else {
          // Th√™m m·ªõi
          khachHangData.push({ ten, sdt });
        }

        saveData(); // L∆∞u v√†o localStorage
        resetForm();
        loadKhachHang();
      });

      function editKhachHang(sdt) {
        const kh = khachHangData.find((kh) => kh.sdt === sdt);
        if (!kh) return;
        tenInput.value = kh.ten;
        sdtInput.value = kh.sdt;
        sdtCuInput.value = kh.sdt;
        form.querySelector('button[type="submit"]').textContent = 'C·∫≠p nh·∫≠t';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      function deleteKhachHang(sdt) {
        if (!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a kh√°ch h√†ng n√†y?')) return;
        khachHangData = khachHangData.filter((kh) => kh.sdt !== sdt);
        saveData(); // L∆∞u v√†o localStorage
        loadKhachHang();
      }

      loadKhachHang();
    </script>
  </body>
</html>
